(function(D,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],o):(D=typeof globalThis<"u"?globalThis:D||self,o(D.VueCommandPalette={},D.Vue))})(this,function(D,o){"use strict";var me;const pe=typeof window<"u",Ke=n=>typeof n=="string",z=()=>{};pe&&((me=window==null?void 0:window.navigator)==null?void 0:me.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function te(n){return typeof n=="function"?n():o.unref(n)}function je(n,e){function t(...s){n(()=>e.apply(this,s),{fn:e,thisArg:this,args:s})}return t}function Ge(n,e={}){let t,s;return i=>{const c=te(n),l=te(e.maxWait);if(t&&clearTimeout(t),c<=0||l!==void 0&&l<=0)return s&&(clearTimeout(s),s=null),i();l&&!s&&(s=setTimeout(()=>{t&&clearTimeout(t),s=null,i()},l)),t=setTimeout(()=>{s&&clearTimeout(s),s=null,i()},c)}}function Ue(n){return n}function He(n){return o.getCurrentScope()?(o.onScopeDispose(n),!0):!1}function ge(n,e=200,t={}){return je(Ge(e,t),n)}function ne(n,e=200,t={}){if(e<=0)return n;const s=o.ref(n.value),r=ge(()=>{s.value=n.value},e,t);return o.watch(n,()=>r()),s}function _e(n,e,t){return o.watch(n,(s,r,i)=>{s&&e(s,r,i)},t)}function We(n){var e;const t=te(n);return(e=t==null?void 0:t.$el)!=null?e:t}const ye=pe?window:void 0;function Q(...n){let e,t,s,r;if(Ke(n[0])?([t,s,r]=n,e=ye):[e,t,s,r]=n,!e)return z;let i=z;const c=o.watch(()=>We(e),a=>{i(),a&&(a.addEventListener(t,s,r),i=()=>{a.removeEventListener(t,s,r),i=z})},{immediate:!0,flush:"post"}),l=()=>{c(),i()};return He(l),l}const se=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},re="__vueuse_ssr_handlers__";se[re]=se[re]||{},se[re];const ze={ctrl:"control",command:"meta",cmd:"meta",option:"alt",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright"};function Qe(n={}){const{reactive:e=!1,target:t=ye,aliasMap:s=ze,passive:r=!0,onEventFired:i=z}=n,c=o.reactive(new Set),l={toJSON(){return{}},current:c},a=e?o.reactive(l):l,d=new Set,h=new Set;function m(f,_){f in a&&(e?a[f]=_:a[f].value=_)}function g(){for(const f of h)m(f,!1)}function E(f,_){var I,x;const M=(I=f.key)==null?void 0:I.toLowerCase(),K=[(x=f.code)==null?void 0:x.toLowerCase(),M].filter(Boolean);M&&(_?c.add(M):c.delete(M));for(const L of K)h.add(L),m(L,_);M==="meta"&&!_?(d.forEach(L=>{c.delete(L),m(L,!1)}),d.clear()):typeof f.getModifierState=="function"&&f.getModifierState("Meta")&&_&&[...c,...K].forEach(L=>d.add(L))}Q(t,"keydown",f=>(E(f,!0),i(f)),{passive:r}),Q(t,"keyup",f=>(E(f,!1),i(f)),{passive:r}),Q("blur",g,{passive:!0}),Q("focus",g,{passive:!0});const S=new Proxy(a,{get(f,_,I){if(typeof _!="string")return Reflect.get(f,_,I);if(_=_.toLowerCase(),_ in s&&(_=s[_]),!(_ in a))if(/[+_-]/.test(_)){const M=_.split(/[+_-]/g).map(T=>T.trim());a[_]=o.computed(()=>M.every(T=>o.unref(S[T])))}else a[_]=o.ref(!1);const x=Reflect.get(f,_,I);return e?o.unref(x):x}});return S}var Ee;(function(n){n.UP="UP",n.RIGHT="RIGHT",n.DOWN="DOWN",n.LEFT="LEFT",n.NONE="NONE"})(Ee||(Ee={}));var Ye=Object.defineProperty,Se=Object.getOwnPropertySymbols,Je=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable,we=(n,e,t)=>e in n?Ye(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,qe=(n,e)=>{for(var t in e||(e={}))Je.call(e,t)&&we(n,t,e[t]);if(Se)for(var t of Se(e))Xe.call(e,t)&&we(n,t,e[t]);return n};qe({linear:Ue},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});function N(n){return Array.isArray?Array.isArray(n):be(n)==="[object Array]"}const Ze=1/0;function et(n){if(typeof n=="string")return n;let e=n+"";return e=="0"&&1/n==-Ze?"-0":e}function tt(n){return n==null?"":et(n)}function $(n){return typeof n=="string"}function Ie(n){return typeof n=="number"}function nt(n){return n===!0||n===!1||st(n)&&be(n)=="[object Boolean]"}function Me(n){return typeof n=="object"}function st(n){return Me(n)&&n!==null}function A(n){return n!=null}function oe(n){return!n.trim().length}function be(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const kn="Extended search is not available",rt="Incorrect 'index' type",ot=n=>`Invalid value for key ${n}`,it=n=>`Pattern length exceeds max of ${n}.`,ct=n=>`Missing ${n} property in key`,at=n=>`Property 'weight' in key '${n}' must be a positive integer`,xe=Object.prototype.hasOwnProperty;class lt{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(s=>{let r=ke(s);t+=r.weight,this._keys.push(r),this._keyMap[r.id]=r,t+=r.weight}),this._keys.forEach(s=>{s.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function ke(n){let e=null,t=null,s=null,r=1,i=null;if($(n)||N(n))s=n,e=Ce(n),t=ie(n);else{if(!xe.call(n,"name"))throw new Error(ct("name"));const c=n.name;if(s=c,xe.call(n,"weight")&&(r=n.weight,r<=0))throw new Error(at(c));e=Ce(c),t=ie(c),i=n.getFn}return{path:e,id:t,weight:r,src:s,getFn:i}}function Ce(n){return N(n)?n:n.split(".")}function ie(n){return N(n)?n.join("."):n}function ut(n,e){let t=[],s=!1;const r=(i,c,l)=>{if(!!A(i))if(!c[l])t.push(i);else{let a=c[l];const d=i[a];if(!A(d))return;if(l===c.length-1&&($(d)||Ie(d)||nt(d)))t.push(tt(d));else if(N(d)){s=!0;for(let h=0,m=d.length;h<m;h+=1)r(d[h],c,l+1)}else c.length&&r(d,c,l+1)}};return r(n,$(e)?e.split("."):e,0),s?t:t[0]}var p={...{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,e)=>n.score===e.score?n.idx<e.idx?-1:1:n.score<e.score?-1:1},...{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},...{location:0,threshold:.6,distance:100},...{useExtendedSearch:!1,getFn:ut,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const dt=/[^ ]+/g;function ht(n=1,e=3){const t=new Map,s=Math.pow(10,e);return{get(r){const i=r.match(dt).length;if(t.has(i))return t.get(i);const c=1/Math.pow(i,.5*n),l=parseFloat(Math.round(c*s)/s);return t.set(i,l),l},clear(){t.clear()}}}class ce{constructor({getFn:e=p.getFn,fieldNormWeight:t=p.fieldNormWeight}={}){this.norm=ht(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,s)=>{this._keysMap[t.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,$(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();$(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,s=this.size();t<s;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!A(e)||oe(e))return;let s={v:e,i:t,n:this.norm.get(e)};this.records.push(s)}_addObject(e,t){let s={i:t,$:{}};this.keys.forEach((r,i)=>{let c=r.getFn?r.getFn(e):this.getFn(e,r.path);if(!!A(c)){if(N(c)){let l=[];const a=[{nestedArrIndex:-1,value:c}];for(;a.length;){const{nestedArrIndex:d,value:h}=a.pop();if(!!A(h))if($(h)&&!oe(h)){let m={v:h,i:d,n:this.norm.get(h)};l.push(m)}else N(h)&&h.forEach((m,g)=>{a.push({nestedArrIndex:g,value:m})})}s.$[i]=l}else if($(c)&&!oe(c)){let l={v:c,n:this.norm.get(c)};s.$[i]=l}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function Oe(n,e,{getFn:t=p.getFn,fieldNormWeight:s=p.fieldNormWeight}={}){const r=new ce({getFn:t,fieldNormWeight:s});return r.setKeys(n.map(ke)),r.setSources(e),r.create(),r}function ft(n,{getFn:e=p.getFn,fieldNormWeight:t=p.fieldNormWeight}={}){const{keys:s,records:r}=n,i=new ce({getFn:e,fieldNormWeight:t});return i.setKeys(s),i.setIndexRecords(r),i}function Y(n,{errors:e=0,currentLocation:t=0,expectedLocation:s=0,distance:r=p.distance,ignoreLocation:i=p.ignoreLocation}={}){const c=e/n.length;if(i)return c;const l=Math.abs(s-t);return r?c+l/r:l?1:c}function mt(n=[],e=p.minMatchCharLength){let t=[],s=-1,r=-1,i=0;for(let c=n.length;i<c;i+=1){let l=n[i];l&&s===-1?s=i:!l&&s!==-1&&(r=i-1,r-s+1>=e&&t.push([s,r]),s=-1)}return n[i-1]&&i-s>=e&&t.push([s,i-1]),t}const F=32;function pt(n,e,t,{location:s=p.location,distance:r=p.distance,threshold:i=p.threshold,findAllMatches:c=p.findAllMatches,minMatchCharLength:l=p.minMatchCharLength,includeMatches:a=p.includeMatches,ignoreLocation:d=p.ignoreLocation}={}){if(e.length>F)throw new Error(it(F));const h=e.length,m=n.length,g=Math.max(0,Math.min(s,m));let E=i,S=g;const f=l>1||a,_=f?Array(m):[];let I;for(;(I=n.indexOf(e,S))>-1;){let C=Y(e,{currentLocation:I,expectedLocation:g,distance:r,ignoreLocation:d});if(E=Math.min(C,E),S=I+h,f){let R=0;for(;R<h;)_[I+R]=1,R+=1}}S=-1;let x=[],M=1,T=h+m;const K=1<<h-1;for(let C=0;C<h;C+=1){let R=0,k=T;for(;R<k;)Y(e,{errors:C,currentLocation:g+k,expectedLocation:g,distance:r,ignoreLocation:d})<=E?R=k:T=k,k=Math.floor((T-R)/2+R);T=k;let q=Math.max(1,g-k+1),j=c?m:Math.min(g+k,m)+h,v=Array(j+2);v[j+1]=(1<<C)-1;for(let O=j;O>=q;O-=1){let G=O-1,W=t[n.charAt(G)];if(f&&(_[G]=+!!W),v[O]=(v[O+1]<<1|1)&W,C&&(v[O]|=(x[O+1]|x[O])<<1|1|x[O+1]),v[O]&K&&(M=Y(e,{errors:C,currentLocation:G,expectedLocation:g,distance:r,ignoreLocation:d}),M<=E)){if(E=M,S=G,S<=g)break;q=Math.max(1,2*g-S)}}if(Y(e,{errors:C+1,currentLocation:g,expectedLocation:g,distance:r,ignoreLocation:d})>E)break;x=v}const L={isMatch:S>=0,score:Math.max(.001,M)};if(f){const C=mt(_,l);C.length?a&&(L.indices=C):L.isMatch=!1}return L}function gt(n){let e={};for(let t=0,s=n.length;t<s;t+=1){const r=n.charAt(t);e[r]=(e[r]||0)|1<<s-t-1}return e}class Ae{constructor(e,{location:t=p.location,threshold:s=p.threshold,distance:r=p.distance,includeMatches:i=p.includeMatches,findAllMatches:c=p.findAllMatches,minMatchCharLength:l=p.minMatchCharLength,isCaseSensitive:a=p.isCaseSensitive,ignoreLocation:d=p.ignoreLocation}={}){if(this.options={location:t,threshold:s,distance:r,includeMatches:i,findAllMatches:c,minMatchCharLength:l,isCaseSensitive:a,ignoreLocation:d},this.pattern=a?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(g,E)=>{this.chunks.push({pattern:g,alphabet:gt(g),startIndex:E})},m=this.pattern.length;if(m>F){let g=0;const E=m%F,S=m-E;for(;g<S;)h(this.pattern.substr(g,F),g),g+=F;if(E){const f=m-F;h(this.pattern.substr(f),f)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:s}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let S={isMatch:!0,score:0};return s&&(S.indices=[[0,e.length-1]]),S}const{location:r,distance:i,threshold:c,findAllMatches:l,minMatchCharLength:a,ignoreLocation:d}=this.options;let h=[],m=0,g=!1;this.chunks.forEach(({pattern:S,alphabet:f,startIndex:_})=>{const{isMatch:I,score:x,indices:M}=pt(e,S,f,{location:r+_,distance:i,threshold:c,findAllMatches:l,minMatchCharLength:a,includeMatches:s,ignoreLocation:d});I&&(g=!0),m+=x,I&&M&&(h=[...h,...M])});let E={isMatch:g,score:g?m/this.chunks.length:1};return g&&s&&(E.indices=h),E}}class P{constructor(e){this.pattern=e}static isMultiMatch(e){return Le(e,this.multiRegex)}static isSingleMatch(e){return Le(e,this.singleRegex)}search(){}}function Le(n,e){const t=n.match(e);return t?t[1]:null}class _t extends P{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class yt extends P{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const s=e.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class Et extends P{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class St extends P{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class wt extends P{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class It extends P{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class Re extends P{constructor(e,{location:t=p.location,threshold:s=p.threshold,distance:r=p.distance,includeMatches:i=p.includeMatches,findAllMatches:c=p.findAllMatches,minMatchCharLength:l=p.minMatchCharLength,isCaseSensitive:a=p.isCaseSensitive,ignoreLocation:d=p.ignoreLocation}={}){super(e),this._bitapSearch=new Ae(e,{location:t,threshold:s,distance:r,includeMatches:i,findAllMatches:c,minMatchCharLength:l,isCaseSensitive:a,ignoreLocation:d})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Te extends P{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,s;const r=[],i=this.pattern.length;for(;(s=e.indexOf(this.pattern,t))>-1;)t=s+i,r.push([s,t-1]);const c=!!r.length;return{isMatch:c,score:c?0:1,indices:r}}}const ae=[_t,Te,Et,St,It,wt,yt,Re],ve=ae.length,Mt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,bt="|";function xt(n,e={}){return n.split(bt).map(t=>{let s=t.trim().split(Mt).filter(i=>i&&!!i.trim()),r=[];for(let i=0,c=s.length;i<c;i+=1){const l=s[i];let a=!1,d=-1;for(;!a&&++d<ve;){const h=ae[d];let m=h.isMultiMatch(l);m&&(r.push(new h(m,e)),a=!0)}if(!a)for(d=-1;++d<ve;){const h=ae[d];let m=h.isSingleMatch(l);if(m){r.push(new h(m,e));break}}}return r})}const kt=new Set([Re.type,Te.type]);class Ct{constructor(e,{isCaseSensitive:t=p.isCaseSensitive,includeMatches:s=p.includeMatches,minMatchCharLength:r=p.minMatchCharLength,ignoreLocation:i=p.ignoreLocation,findAllMatches:c=p.findAllMatches,location:l=p.location,threshold:a=p.threshold,distance:d=p.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:s,minMatchCharLength:r,findAllMatches:c,ignoreLocation:i,location:l,threshold:a,distance:d},this.pattern=t?e:e.toLowerCase(),this.query=xt(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:r}=this.options;e=r?e:e.toLowerCase();let i=0,c=[],l=0;for(let a=0,d=t.length;a<d;a+=1){const h=t[a];c.length=0,i=0;for(let m=0,g=h.length;m<g;m+=1){const E=h[m],{isMatch:S,indices:f,score:_}=E.search(e);if(S){if(i+=1,l+=_,s){const I=E.constructor.type;kt.has(I)?c=[...c,...f]:c.push(f)}}else{l=0,i=0,c.length=0;break}}if(i){let m={isMatch:!0,score:l/i};return s&&(m.indices=c),m}}return{isMatch:!1,score:1}}}const le=[];function Ot(...n){le.push(...n)}function ue(n,e){for(let t=0,s=le.length;t<s;t+=1){let r=le[t];if(r.condition(n,e))return new r(n,e)}return new Ae(n,e)}const J={AND:"$and",OR:"$or"},de={PATH:"$path",PATTERN:"$val"},he=n=>!!(n[J.AND]||n[J.OR]),At=n=>!!n[de.PATH],Lt=n=>!N(n)&&Me(n)&&!he(n),$e=n=>({[J.AND]:Object.keys(n).map(e=>({[e]:n[e]}))});function Ne(n,e,{auto:t=!0}={}){const s=r=>{let i=Object.keys(r);const c=At(r);if(!c&&i.length>1&&!he(r))return s($e(r));if(Lt(r)){const a=c?r[de.PATH]:i[0],d=c?r[de.PATTERN]:r[a];if(!$(d))throw new Error(ot(a));const h={keyId:ie(a),pattern:d};return t&&(h.searcher=ue(d,e)),h}let l={children:[],operator:i[0]};return i.forEach(a=>{const d=r[a];N(d)&&d.forEach(h=>{l.children.push(s(h))})}),l};return he(n)||(n=$e(n)),s(n)}function Rt(n,{ignoreFieldNorm:e=p.ignoreFieldNorm}){n.forEach(t=>{let s=1;t.matches.forEach(({key:r,norm:i,score:c})=>{const l=r?r.weight:null;s*=Math.pow(c===0&&l?Number.EPSILON:c,(l||1)*(e?1:i))}),t.score=s})}function Tt(n,e){const t=n.matches;e.matches=[],A(t)&&t.forEach(s=>{if(!A(s.indices)||!s.indices.length)return;const{indices:r,value:i}=s;let c={indices:r,value:i};s.key&&(c.key=s.key.src),s.idx>-1&&(c.refIndex=s.idx),e.matches.push(c)})}function vt(n,e){e.score=n.score}function $t(n,e,{includeMatches:t=p.includeMatches,includeScore:s=p.includeScore}={}){const r=[];return t&&r.push(Tt),s&&r.push(vt),n.map(i=>{const{idx:c}=i,l={item:e[c],refIndex:c};return r.length&&r.forEach(a=>{a(i,l)}),l})}class V{constructor(e,t={},s){this.options={...p,...t},this.options.useExtendedSearch,this._keyStore=new lt(this.options.keys),this.setCollection(e,s)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof ce))throw new Error(rt);this._myIndex=t||Oe(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){!A(e)||(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let s=0,r=this._docs.length;s<r;s+=1){const i=this._docs[s];e(i,s)&&(this.removeAt(s),s-=1,r-=1,t.push(i))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:s,includeScore:r,shouldSort:i,sortFn:c,ignoreFieldNorm:l}=this.options;let a=$(e)?$(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Rt(a,{ignoreFieldNorm:l}),i&&a.sort(c),Ie(t)&&t>-1&&(a=a.slice(0,t)),$t(a,this._docs,{includeMatches:s,includeScore:r})}_searchStringList(e){const t=ue(e,this.options),{records:s}=this._myIndex,r=[];return s.forEach(({v:i,i:c,n:l})=>{if(!A(i))return;const{isMatch:a,score:d,indices:h}=t.searchIn(i);a&&r.push({item:i,idx:c,matches:[{score:d,value:i,norm:l,indices:h}]})}),r}_searchLogical(e){const t=Ne(e,this.options),s=(l,a,d)=>{if(!l.children){const{keyId:m,searcher:g}=l,E=this._findMatches({key:this._keyStore.get(m),value:this._myIndex.getValueForItemAtKeyId(a,m),searcher:g});return E&&E.length?[{idx:d,item:a,matches:E}]:[]}const h=[];for(let m=0,g=l.children.length;m<g;m+=1){const E=l.children[m],S=s(E,a,d);if(S.length)h.push(...S);else if(l.operator===J.AND)return[]}return h},r=this._myIndex.records,i={},c=[];return r.forEach(({$:l,i:a})=>{if(A(l)){let d=s(t,l,a);d.length&&(i[a]||(i[a]={idx:a,item:l,matches:[]},c.push(i[a])),d.forEach(({matches:h})=>{i[a].matches.push(...h)}))}}),c}_searchObjectList(e){const t=ue(e,this.options),{keys:s,records:r}=this._myIndex,i=[];return r.forEach(({$:c,i:l})=>{if(!A(c))return;let a=[];s.forEach((d,h)=>{a.push(...this._findMatches({key:d,value:c[h],searcher:t}))}),a.length&&i.push({idx:l,item:c,matches:a})}),i}_findMatches({key:e,value:t,searcher:s}){if(!A(t))return[];let r=[];if(N(t))t.forEach(({v:i,i:c,n:l})=>{if(!A(i))return;const{isMatch:a,score:d,indices:h}=s.searchIn(i);a&&r.push({score:d,key:e,value:i,idx:c,norm:l,indices:h})});else{const{v:i,n:c}=t,{isMatch:l,score:a,indices:d}=s.searchIn(i);l&&r.push({score:a,key:e,value:i,norm:c,indices:d})}return r}}V.version="6.6.2",V.createIndex=Oe,V.parseIndex=ft,V.config=p,V.parseQuery=Ne,Ot(Ct);const Pe=o.reactive({selectedNode:"",selectedGroup:"",search:"",dataValue:"",filtered:{count:0,items:new Map,groups:new Set}}),U=()=>({isSearching:o.computed(()=>Pe.search!==""),...o.toRefs(Pe)});function Nt(n){return{all:n=n||new Map,on:function(e,t){var s=n.get(e);s?s.push(t):n.set(e,[t])},off:function(e,t){var s=n.get(e);s&&(t?s.splice(s.indexOf(t)>>>0,1):n.set(e,[]))},emit:function(e,t){var s=n.get(e);s&&s.slice().map(function(r){r(t)}),(s=n.get("*"))&&s.slice().map(function(r){r(e,t)})}}}const Pt=Nt(),X=()=>({emitter:Pt});function Bt(n,e){let t=n.nextElementSibling;for(;t;){if(t.matches(e))return t;t=t.nextElementSibling}}function Dt(n,e){let t=n.previousElementSibling;for(;t;){if(t.matches(e))return t;t=t.previousElementSibling}}const Ft=["command-theme"],Vt={"command-root":""},Kt=o.defineComponent({name:"Command"}),jt=o.defineComponent({...Kt,props:{theme:{type:String,default:"default"},fuseOptions:{type:Object,default:()=>({threshold:.2,keys:["label"]})}},emits:["select-item"],setup(n,{emit:e}){const t=n,s='[command-item=""]',r="command-item-key",i='[command-group=""]',c="command-group-key",l='[command-group-heading=""]',a=`${s}:not([aria-disabled="true"])`,d=`${s}[aria-selected="true"]`,h="command-item-select",m="data-value";o.provide("theme",t.theme||"default");const{selectedNode:g,search:E,dataValue:S,filtered:f}=U(),{emitter:_}=X(),I=o.ref(),x=ne(o.ref(new Map),333),M=ne(o.ref(new Set),333),T=ne(o.ref(new Map)),K=o.computed(()=>{const u=[];for(const[w,y]of x.value.entries())u.push({key:w,label:y});return u}),L=o.computed(()=>{const u=V.createIndex(t.fuseOptions.keys,K.value);return new V(K.value,t.fuseOptions,u)}),C=()=>{var w,y,b;const u=R();u&&(((w=u.parentElement)==null?void 0:w.firstElementChild)===u&&((b=(y=u.closest(i))==null?void 0:y.querySelector(l))==null||b.scrollIntoView({block:"nearest"})),u.scrollIntoView({block:"nearest"}))},R=()=>{var u;return(u=I.value)==null?void 0:u.querySelector(d)},k=(u=I.value)=>{const w=u==null?void 0:u.querySelectorAll(a);return w?Array.from(w):[]},q=()=>{var w;const u=(w=I.value)==null?void 0:w.querySelectorAll(i);return u?Array.from(u):[]},j=()=>{const[u]=k();u&&u.getAttribute(r)&&(g.value=u.getAttribute(r)||"")},v=u=>{const y=k()[u];y&&(g.value=y.getAttribute(r)||"")},Z=u=>{const w=R(),y=k(),b=y.findIndex(ee=>ee===w),B=y[b+u];B?g.value=B.getAttribute(r)||"":u>0?v(0):v(y.length-1)},O=u=>{const w=R();let y=w==null?void 0:w.closest(i),b=null;for(;y&&!b;)y=u>0?Bt(y,i):Dt(y,i),b=y==null?void 0:y.querySelector(a);b?g.value=b.getAttribute(r)||"":Z(u)},G=()=>v(0),W=()=>v(k().length-1),De=u=>{u.preventDefault(),u.metaKey?W():u.altKey?O(1):Z(1)},Fe=u=>{u.preventDefault(),u.metaKey?G():u.altKey?O(-1):Z(-1)},Sn=u=>{switch(u.key){case"n":case"j":{u.ctrlKey&&De(u);break}case"ArrowDown":{De(u);break}case"p":case"k":{u.ctrlKey&&Fe(u);break}case"ArrowUp":{Fe(u);break}case"Home":{G();break}case"End":{W();break}case"Enter":{const w=R();if(w){const y=new Event(h);w.dispatchEvent(y)}}}},wn=()=>{if(!E.value){f.value.count=M.value.size;return}f.value.groups=new Set("");const u=new Map,w=L.value.search(E.value).map(y=>y.item);for(const{key:y,label:b}of w)u.set(y,b);for(const[y,b]of T.value)for(const B of b)u.get(B)&&f.value.groups.add(y);o.nextTick(()=>{f.value.count=u.size,f.value.items=u})},Ve=()=>{const u=k(),w=q();for(const y of u){const b=y.getAttribute(r)||"",B=y.getAttribute(m)||"";M.value.add(b),x.value.set(b,B),f.value.count=x.value.size}for(const y of w){const b=k(y),B=y.getAttribute(c)||"",ee=new Set("");for(const Mn of b){const bn=Mn.getAttribute(r)||"";ee.add(bn)}T.value.set(B,ee)}};o.watch(()=>g.value,u=>{u&&o.nextTick(C)},{deep:!0}),o.watch(()=>E.value,u=>{wn(),o.nextTick(j)}),_.on("selectItem",u=>{e("select-item",u)});const In=ge(u=>{u&&(Ve(),o.nextTick(j))},100);return _.on("rerenderList",In),o.onMounted(()=>{Ve(),j()}),(u,w)=>(o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(n.theme),onKeydown:Sn,ref_key:"commandRef",ref:I,"command-theme":n.theme},[o.createElementVNode("div",Vt,[o.renderSlot(u.$slots,"default")])],42,Ft))}}),H=(n,e)=>{const t=n.__vccOpts||n;for(const[s,r]of e)t[s]=r;return t},fe=H(jt,[["__file","/Users/xiaoyunwei/Documents/GitHub/oss/vue-command-palette/packages/Command.vue"]]),Gt={"command-dialog":""},Ut={"command-dialog-mask":""},Ht={"command-dialog-wrapper":""},Wt={"command-dialog-header":""},zt={"command-dialog-body":""},Qt={key:0,"command-dialog-footer":""},Yt=o.defineComponent({name:"Command.Dialog"}),Jt=o.defineComponent({...Yt,props:{visible:{type:Boolean,required:!0},theme:{type:String,required:!0}},emits:["select-item"],setup(n,{emit:e}){const t=n,{search:s,filtered:r}=U(),{emitter:i}=X(),c=o.ref();i.on("selectItem",a=>{e("select-item",a)});const l=()=>{s.value="",r.value.count=0,r.value.items=new Map,r.value.groups=new Set};return _e(()=>t.visible,l),o.onBeforeUnmount(l),(a,d)=>(o.openBlock(),o.createBlock(o.Teleport,{to:"body",ref_key:"dialogRef",ref:c},[o.createVNode(o.Transition,{name:"command-dialog",appear:""},{default:o.withCtx(()=>[n.visible?(o.openBlock(),o.createBlock(fe,{key:0,theme:n.theme},{default:o.withCtx(()=>[o.createElementVNode("div",Gt,[o.createElementVNode("div",Ut,[o.createElementVNode("div",Ht,[o.createElementVNode("div",Wt,[o.renderSlot(a.$slots,"header")]),o.createElementVNode("div",zt,[o.renderSlot(a.$slots,"body")]),a.$slots.footer?(o.openBlock(),o.createElementBlock("div",Qt,[o.renderSlot(a.$slots,"footer")])):o.createCommentVNode("v-if",!0)])])])]),_:3},8,["theme"])):o.createCommentVNode("v-if",!0)]),_:3})],512))}}),Xt=H(Jt,[["__file","/Users/xiaoyunwei/Documents/GitHub/oss/vue-command-palette/packages/CommandDialog.vue"]]);let Be=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");const qt=["command-group-key","data-value"],Zt={key:0,"command-group-heading":""},en={"command-group-items":"",role:"group"},tn=o.defineComponent({name:"Command.Group"}),nn=o.defineComponent({...tn,props:{heading:{type:String,required:!0}},setup(n){const e=o.computed(()=>`command-group-${Be()}`),{filtered:t,isSearching:s}=U(),r=o.computed(()=>s.value?t.value.groups.has(e.value):!0);return(i,c)=>o.withDirectives((o.openBlock(),o.createElementBlock("div",{"command-group":"",role:"presentation",key:o.unref(e),"command-group-key":o.unref(e),"data-value":n.heading},[n.heading?(o.openBlock(),o.createElementBlock("div",Zt,o.toDisplayString(n.heading),1)):o.createCommentVNode("v-if",!0),o.createElementVNode("div",en,[o.renderSlot(i.$slots,"default")])],8,qt)),[[o.vShow,o.unref(r)]])}}),sn=H(nn,[["__file","/Users/xiaoyunwei/Documents/GitHub/oss/vue-command-palette/packages/CommandGroup.vue"]]),rn=["placeholder","value"],on=o.defineComponent({name:"Command.Input"}),cn=o.defineComponent({...on,props:{placeholder:{type:String,required:!0},value:{type:String,required:!1}},emits:["input","update:value"],setup(n,{emit:e}){const t=o.ref(null),{search:s}=U(),r=o.computed(()=>s.value),i=c=>{const l=c,a=c.target;s.value=a==null?void 0:a.value,e("input",l),e("update:value",s.value)};return o.watchEffect(()=>{var c;(c=t.value)==null||c.focus()}),(c,l)=>(o.openBlock(),o.createElementBlock("input",{ref_key:"inputRef",ref:t,"command-input":"","auto-focus":"","auto-complete":"off","auto-correct":"off","spell-check":!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,placeholder:n.placeholder,value:o.unref(r),onInput:i},null,40,rn))}}),an=H(cn,[["__file","/Users/xiaoyunwei/Documents/GitHub/oss/vue-command-palette/packages/CommandInput.vue"]]),ln=["aria-selected","aria-disabled","command-item-key"],un=o.defineComponent({name:"Command.Item"}),dn=o.defineComponent({...un,props:{shortcut:{type:Array,required:!1},perform:{type:null,required:!1}},emits:["select"],setup(n,{emit:e}){const t=n,s="command-item-select",r="data-value",{current:i}=Qe(),{selectedNode:c,filtered:l,isSearching:a}=U(),{emitter:d}=X(),h=o.ref(),m=o.computed(()=>`command-item-${Be()}`),g=o.computed(()=>{const f=l.value.items.get(m.value);return a.value?f!==void 0:!0}),E=o.computed(()=>Array.from(i)),S=()=>{var _;const f={key:m.value,value:((_=h.value)==null?void 0:_.getAttribute(r))||""};e("select",f),d.emit("selectItem",f)};return _e(E,f=>{t.shortcut&&t.shortcut.length>0&&t.shortcut.every(I=>i.has(I.toLowerCase()))&&t.perform&&t.perform()}),o.watchEffect(()=>{var f;(f=h.value)==null||f.addEventListener(s,S)}),o.onBeforeUnmount(()=>{var f;(f=h.value)==null||f.removeEventListener(s,S)}),(f,_)=>o.withDirectives((o.openBlock(),o.createElementBlock("div",{ref_key:"itemRef",ref:h,"command-item":"",role:"option","aria-selected":o.unref(c)===o.unref(m),"aria-disabled":!o.unref(g),key:o.unref(m),"command-item-key":o.unref(m),onClick:S},[o.renderSlot(f.$slots,"default")],8,ln)),[[o.vShow,o.unref(g)]])}}),hn=H(dn,[["__file","/Users/xiaoyunwei/Documents/GitHub/oss/vue-command-palette/packages/CommandItem.vue"]]),fn=o.defineComponent({name:"Command.List"}),mn=o.defineComponent({...fn,setup(n){const{emitter:e}=X(),t=o.ref(),s=o.ref();let r=null,i;return o.watchEffect(()=>{i=s.value;const c=t.value;i&&c&&(r=new ResizeObserver(l=>{o.nextTick(()=>{const a=i==null?void 0:i.offsetHeight;c==null||c.style.setProperty("--command-list-height",`${a==null?void 0:a.toFixed(1)}px`),e.emit("rerenderList",!0)})}),r.observe(i))}),o.onBeforeUnmount(()=>{r!==null&&i&&r.unobserve(i)}),(c,l)=>(o.openBlock(),o.createElementBlock("div",{"command-list":"",role:"listbox","aria-label":"Suggestions",ref_key:"listRef",ref:t},[o.createElementVNode("div",{"command-list-sizer":"",ref_key:"heightRef",ref:s},[o.renderSlot(c.$slots,"default")],512)],512))}}),pn=H(mn,[["__file","/Users/xiaoyunwei/Documents/GitHub/oss/vue-command-palette/packages/CommandList.vue"]]),gn=o.defineComponent({name:"Command.Empty",setup(n,{attrs:e,slots:t}){const{filtered:s}=U(),r=o.computed(()=>s.value.count===0);return()=>r.value?o.h("div",{"command-empty":"",role:"presentation",...e},t):o.h("div",{"command-empty":"hidden",role:"presentation",style:{display:"none"},...e})}}),_n=o.defineComponent({name:"Command.Loading",setup(n,{attrs:e,slots:t}){return()=>o.h("div",{"command-loading":"",role:"progressbar",...e},t)}}),yn=o.defineComponent({name:"Command.Separator",setup(n,{attrs:e,slots:t}){return()=>o.h("div",{"command-separator":"",role:"separator",...e})}}),En=Object.assign(fe,{Dialog:Xt,Empty:gn,Group:sn,Input:an,Item:hn,List:pn,Loading:_n,Separator:yn,Root:fe});D.Command=En,Object.defineProperties(D,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
